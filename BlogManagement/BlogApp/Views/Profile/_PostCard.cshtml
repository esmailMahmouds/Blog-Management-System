@model Post

<div class="card h-100 shadow-sm post-card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <small class="text-muted">
            <i class="fas fa-calendar-alt"></i> @Model.CreateDate.ToString("MMM dd, yyyy")
        </small>
        @switch (Model.Status)
        {
            case BlogApp.Enums.PostStatus.Approved:
                <span class="badge bg-success">
                    <i class="fas fa-check-circle"></i> Approved
                </span>
                break;
            case BlogApp.Enums.PostStatus.Pending:
                <span class="badge bg-warning">
                    <i class="fas fa-clock"></i> Pending
                </span>
                break;
            case BlogApp.Enums.PostStatus.Rejected:
                <span class="badge bg-danger">
                    <i class="fas fa-times-circle"></i> Rejected
                </span>
                break;
        }
    </div>
    <div class="card-body d-flex flex-column">
        <h5 class="card-title">@Model.Title</h5>
        <p class="card-text text-muted flex-grow-1">@Model.Content</p>
        
        @if (Model.Category != null)
        {
            <div class="mb-2">
                <span class="badge bg-secondary">
                    <i class="fas fa-tag"></i> @Model.Category.Name
                </span>
            </div>
        }

        <div class="d-flex justify-content-between align-items-center">
            <div class="btn-group">
                @if (Model.Status == BlogApp.Enums.PostStatus.Approved)
                {
                    <a asp-controller="HomePage" asp-action="ViewPost" asp-route-id="@Model.Id" 
                       class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-eye"></i> View
                    </a>
                }
                
                @if (Model.Status != BlogApp.Enums.PostStatus.Approved)
                {
                    <a asp-controller="Posts" asp-action="Edit" asp-route-id="@Model.Id" 
                       class="btn btn-outline-warning btn-sm">
                        <i class="fas fa-edit"></i> Edit
                    </a>
                }
                
                <button type="button" class="btn btn-outline-danger btn-sm" 
                        data-bs-toggle="modal" data-bs-target="#deleteModal@(Model.Id)">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </div>
            
            <small class="text-muted">
                <i class="fas fa-heart text-danger"></i> @Model.LikeCount
                @if (Model.RateCount > 0)
                {
                    <span class="ms-2">
                        <i class="fas fa-star text-warning"></i> @Model.AverageRate.ToString("0.0") (@Model.RateCount)
                    </span>
                }
            </small>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal@(Model.Id)" tabindex="-1" aria-labelledby="deleteModalLabel@(Model.Id)" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel@(Model.Id)">Confirm Delete</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this post?</p>
                <p><strong>Title:</strong> @Model.Title</p>
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Warning:</strong> This action cannot be undone. All comments, likes, and ratings associated with this post will also be deleted.
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <form asp-controller="Posts" asp-action="Delete" asp-route-id="@Model.Id" method="post" class="d-inline">
                    @Html.AntiForgeryToken()
                    <button type="submit" class="btn btn-danger">Delete Post</button>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    .post-card {
        transition: transform 0.2s ease-in-out;
    }
    
    .post-card:hover {
        transform: translateY(-2px);
    }
</style>